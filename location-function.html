<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>永信方圓-增值地段_生活機能篇</title>
    <meta name="author" content="" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="Resource-type" content="" />

    <!-- css -->
    <link rel="stylesheet" type="text/css" href="css/reset.css" />
    <!-- <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.7/css/swiper.min.css" /> -->
    <link rel="stylesheet" type="text/css" href="css/slick.css"/>
    <link rel="stylesheet" type="text/css" href="css/slick-theme.css"/>
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    
    
</head>

<body>

    <section>
        <header id="header">
            <nav>
                <ul class="nav">
                    <li>
                        <h3></h3>
                        <ol>
                            <li>
                                <a href="location-environment.html">環境篇</a>
                            </li>
                            <li>
                                <a href="location-location.html">地段建設</a>
                            </li>
                            <li>
                                <a href="location-function.html">生活機能</a>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <h3></h3>
                        <ol>
                            <li>
                                <a href="architecture-outward.html">建築外觀</a>
                            </li>
                            <li>
                                <a href="architecture-public.html">公共空間</a>
                            </li>
                            <li>
                                <a href="architecture-inside.html">空間規劃</a>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <h3></h3>
                        <ol>
                            <li>
                                <a href="engineering-materials.html">建材重點</a>
                            </li>
                            <li>
                                <a href="engineering-engineering.html">工程細節</a>
                            </li>
                            <li>
                        </ol>
                    </li>
                    <li>
                        <h3><a href="construction.html"></a></h3>
                    </li>
                    <li class="backhome">
                        <a href="index.html"></a>
                    </li>
                </ul>
                <div class="menu-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </nav>
        </header>
        <div class="theme location location-function">
            <div class="content">
                <div class="pagetag">
                    <img src="img/location_pagetag.svg" alt="">
                </div>
                <div class="item">
                    <div class="introduction">
                        <div class="introtext">
                            <h2>生活機能全覽</h2>
                            <hr>
                            <p>向陽之美，奇岩站詩巷生活</p>
                        </div>
                        <div class="map_nav">
                            <div class="map_nav_list map_nav_list1">好生活</div>
                            <div class="map_nav_list map_nav_list2">好學區</div>
                            <div class="map_nav_list map_nav_list3">好便捷</div>
                        </div>
                        <div class="zoom">
                            <div class="zoom_list" onclick="zoom_in()">
                                <i class="material-icons">add</i>
                            </div>
                            <div class="zoom_list" onclick="zoom_out()">
                                <i class="material-icons">remove</i>
                            </div>
                        </div>
                    </div>
                    <div class="map_photo">
                        <div class="inner_container" onmousedown="startDrag(event)" onmouseup="stopDrag(event)" onmouseleave="mouseLeave()">
                            <div class="map_photo_bg" draggable="false">
                                <!-- <img src="img/function_map.png" alt=""> -->
                            </div>
                            <div class="map_photo_location" draggable="false">
                                <div class="map_photo_location_box map_photo_location_box1">
                                    <div class="map_photo_location_list map_photo_location1-1">
                                        <span>北投中繼市場</span>
                                        <img src="img/location_icon.svg" alt="">
                                    </div>
                                    <div class="map_photo_location_list map_photo_location1-2">
                                        <span>公館公園</span>
                                        <img src="img/location_icon.svg" alt="">
                                    </div>
                                    <div class="map_photo_location_list map_photo_location1-3">
                                        <span>家樂福超市</span>
                                        <img src="img/location_icon.svg" alt="">
                                    </div>
                                    <div class="map_photo_location_list map_photo_location1-4">
                                        <span>奇岩一號公園</span>
                                        <img src="img/location_icon.svg" alt="">
                                    </div>
                                    <div class="map_photo_location_list map_photo_location1-5">
                                        <span>奇岩二號公園</span>
                                        <img src="img/location_icon.svg" alt="">
                                    </div>
                                    <div class="map_photo_location_list map_photo_location1-6">
                                        <span>奇岩三號公園</span>
                                        <img src="img/location_icon.svg" alt="">
                                    </div>
                                    <div class="map_photo_location_list map_photo_location1-7">
                                        <span>奇岩四號公園</span>
                                        <img src="img/location_icon.svg" alt="">
                                    </div>
                                </div>
                                <div class="map_photo_location_box map_photo_location_box2">
                                    <div class="map_photo_location_list map_photo_location2-1">
                                        <span>清江國小</span>
                                        <img src="img/location_icon.svg" alt="">
                                    </div>
                                </div>
                                <div class="map_photo_location_box map_photo_location_box3">
                                    <div class="map_photo_location_list map_photo_location3-1">
                                        <span>捷運奇岩站</span>
                                        <img src="img/location_icon.svg" alt="">
                                    </div>
                                    <div class="map_photo_location_list map_photo_location3-2">
                                        <span>中央南大興街口站</span>
                                        <img src="img/location_icon.svg" alt="">
                                    </div>
                                    <div class="map_photo_location_list map_photo_location3-3">
                                        <span>YouBike捷運奇岩站</span>
                                        <img src="img/location_icon.svg" alt="">
                                    </div>
                                    <div class="map_photo_location_list map_photo_location3-4">
                                        <span>公車忠義新村站</span>
                                        <img src="img/location_icon.svg" alt="">
                                    </div>
                                    <div class="map_photo_location_list map_photo_location3-5">
                                        <span>公車福安宮站</span>
                                        <img src="img/location_icon.svg" alt="">
                                    </div>
                                    <div class="map_photo_location_list map_photo_location3-6">
                                        <span>YouBike清江國小站</span>
                                        <img src="img/location_icon.svg" alt="">
                                    </div>
                                    <div class="map_photo_location_list map_photo_location3-7">
                                        <span>公車清江國小站</span>
                                        <img src="img/location_icon.svg" alt="">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="popup popup1-1">
                <div class="inner">
                    <div class="popup_intro">
                        <div class="name">北投中繼市場</div>
                    </div>
                    <div class="popup_photo slider1-1">
                        <div class="photo">
                            <img src="img/function_photo1-1.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo1-2.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo1-3.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo1-4.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo1-5.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo1-6.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo1-7.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo1-8.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo1-9.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo1-10.jpg" alt="">
                        </div>
                    </div>
                    <!-- <div class="swiper-button-prev"></div>
                    <div class="swiper-button-next"></div> -->
                </div>
                <div class="popup_close"></div>
            </div>
            <div class="popup popup1-2">
                <div class="inner">
                    <div class="popup_intro">
                        <div class="name">公館公園</div>
                    </div>
                    <div class="popup_photo slider1-2">
                        <div class="photo">
                            <img src="img/function_photo7-1.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo7-2.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo7-3.jpg" alt="">
                        </div>
                    </div>
                </div>
                <div class="popup_close"></div>
            </div>
            <div class="popup popup1-3">
                <div class="inner">
                    <div class="popup_intro">
                        <div class="name">家樂福超市</div>
                    </div>
                    <div class="popup_photo slider1-3">
                        <div class="photo">
                            <img src="img/function_photo2-1.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo2-2.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo2-3.jpg" alt="">
                        </div>
                    </div>
                </div>
                <div class="popup_close"></div>
            </div>
            <div class="popup popup1-4">
                <div class="inner">
                    <div class="popup_intro">
                        <div class="name">奇岩一號公園</div>
                    </div>
                    <div class="popup_photo slider1-4">
                        <div class="photo">
                            <img src="img/function_photo4-1.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo4-2.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo4-3.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo4-4.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo4-5.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo4-6.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo4-7.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo4-8.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo4-9.jpg" alt="">
                        </div>
                    </div>
                </div>
                <div class="popup_close"></div>
            </div>
            <div class="popup popup1-5">
                <div class="inner">
                    <div class="popup_intro">
                        <div class="name">奇岩二號公園</div>
                    </div>
                    <div class="popup_photo slider1-5">
                        <div class="photo">
                            <img src="img/function_photo5-1.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo5-2.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo5-3.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo5-4.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo5-5.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo5-6.jpg" alt="">
                        </div>
                    </div>
                </div>
                <div class="popup_close"></div>
            </div>
            <div class="popup popup1-6">
                <div class="inner">
                    <div class="popup_intro">
                        <div class="name">奇岩三號公園</div>
                    </div>
                    <div class="popup_photo slider1-6">
                        <div class="photo">
                            <img src="img/function_photo8-1.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo8-2.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo8-3.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo8-4.jpg" alt="">
                        </div>
                    </div>
                </div>
                <div class="popup_close"></div>
            </div>
            <div class="popup popup1-7">
                <div class="inner">
                    <div class="popup_intro">
                        <div class="name">奇岩四號公園</div>
                    </div>
                    <div class="popup_photo slider1-7">
                        <div class="photo">
                            <img src="img/function_photo9-1.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo9-2.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo9-3.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo9-4.jpg" alt="">
                        </div>
                    </div>
                </div>
                <div class="popup_close"></div>
            </div>
            <div class="popup popup2-1">
                <div class="inner">
                    <div class="popup_intro">
                        <div class="name">清江國小</div>
                    </div>
                    <div class="popup_photo slider2-1">
                        <div class="photo">
                            <img src="img/function_photo6-1.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo6-2.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo6-3.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo6-4.jpg" alt="">
                        </div>
                    </div>
                </div>
                <div class="popup_close"></div>
            </div>
            <div class="popup popup3-1">
                <div class="inner">
                    <div class="popup_intro">
                        <div class="name">捷運奇岩站</div>
                    </div>
                    <div class="popup_photo slider3-1">
                        <div class="photo">
                            <img src="img/function_photo3-1.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo3-2.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo3-3.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo3-4.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo3-5.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo3-6.jpg" alt="">
                        </div>
                        <div class="photo">
                            <img src="img/function_photo3-7.jpg" alt="">
                        </div>
                    </div>
                </div>
                <div class="popup_close"></div>
            </div>
            <div class="popup popup3-6">
                <div class="inner">
                    <div class="popup_intro">
                        <div class="name">YouBike 清江國小站</div>
                    </div>
                    <div class="popup_photo slider3-6">
                        <div class="photo">
                            <img src="img/function_photo10-1.jpg" alt="">
                        </div>
                    </div>
                </div>
                <div class="popup_close"></div>
            </div>
            
        </div>
    </section>

</body>

<!-- <script type="text/javascript" src="js/jquery-1.11.2.min.js"></script> -->
<!-- <script src="js/jquery-3.6.0.min.js"></script> -->
<!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.7/js/swiper.min.js"></script> -->
<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
<!-- <script type="text/javascript" src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script> -->
<script type="text/javascript" src="js/slick.js"></script>
<script src="js/modernizr.js"></script>
<!-- <script src="js/jquery-2.1.1.min.js"></script> -->
<script src="js/main.js"></script> 

<script>




    $(document).ready(function () {

        // $('#header').load('page/header.html');
        // $('#footer').load('page/footer.html');
        $(".slider1-1").slick({
            arrows: true
        });
        $(".slider1-2").slick({
            arrows: true
        });
        $(".slider1-3").slick({
            arrows: true
        });
        $(".slider1-4").slick({
            arrows: true
        });
        $(".slider1-5").slick({
            arrows: true
        });
        $(".slider1-6").slick({
            arrows: true
        });
        $(".slider1-7").slick({
            arrows: true
        });
        $(".slider2-1").slick({
            arrows: true
        });
        $(".slider3-1").slick({
            arrows: true
        });
        $(".slider3-6").slick({
            arrows: true
        });
        
        $('.map_nav_list1').on('click', function () {      
            $(this).addClass('active').siblings().removeClass('active');
            $(".map_photo_location_box1").addClass('active').siblings().removeClass('active');
        });
        $('.map_nav_list2').on('click', function () {      
            $(this).addClass('active').siblings().removeClass('active');
            $(".map_photo_location_box2").addClass('active').siblings().removeClass('active');
        });
        $('.map_nav_list3').on('click', function () {      
            $(this).addClass('active').siblings().removeClass('active');
            $(".map_photo_location_box3").addClass('active').siblings().removeClass('active');
        });

        $('.map_photo_location1-1').on('click', function () {
            $('.popup1-1').addClass('active').siblings().removeClass('active');
        });
        $('.map_photo_location1-2').on('click', function () {
            $('.popup1-2').addClass('active').siblings().removeClass('active');
        });
        $('.map_photo_location1-3').on('click', function () {
            $('.popup1-3').addClass('active').siblings().removeClass('active');
        });
        $('.map_photo_location1-4').on('click', function () {
            $('.popup1-4').addClass('active').siblings().removeClass('active');
        });
        $('.map_photo_location1-5').on('click', function () {
            $('.popup1-5').addClass('active').siblings().removeClass('active');
        });
        $('.map_photo_location1-6').on('click', function () {
            $('.popup1-6').addClass('active').siblings().removeClass('active');
        });
        $('.map_photo_location1-7').on('click', function () {
            $('.popup1-7').addClass('active').siblings().removeClass('active');
        });
        $('.map_photo_location2-1').on('click', function () {
            $('.popup2-1').addClass('active').siblings().removeClass('active');
        });
        $('.map_photo_location3-1').on('click', function () {
            $('.popup3-1').addClass('active').siblings().removeClass('active');
        });
        $('.map_photo_location3-6').on('click', function () {
            $('.popup3-6').addClass('active').siblings().removeClass('active');
        });

        $('.popup_close').on('click', function () {
            $('.popup').removeClass('active');
        });



        // 放大div
        var container = document.querySelector('.inner_container');
        let transf  = getTransform(container)
        transf.multiple = 1
        container.style.transform = `matrix(${transf.multiple}, 0, 0, ${transf.multiple}, ${transf.transX}, ${transf.transY})`
    });


    $('.menu-toggle').on('click', function () {      
        $(this).toggleClass('active');
        $("#header .nav").toggleClass('active');

    });

        var offsetX, offsetY;
        var _top, _left;
        var multiple = 1

        function zoom_in(){
            var container = document.querySelector('.inner_container');
            let transf  = getTransform(container)
            transf.multiple = transf.multiple + 0.5
            if(transf.multiple >= 2){
                transf.multiple = 2
            }
            container.style.transform = `matrix(${transf.multiple}, 0, 0, ${transf.multiple}, ${transf.transX}, ${transf.transY})`
        }

        function zoom_out(){
            var container = document.querySelector('.inner_container');
            let { clientWidth: innerWidth, clientHeight: innerHeight, offsetLeft: innerLeft, offsetTop: innerTop } = document.querySelector('.inner_container')
            let { clientWidth: outerWidth, clientHeight: outerHeight } = document.querySelector('.map_photo') 

            let transf  = getTransform(container)
            transf.multiple = transf.multiple - 0.5
            if(transf.multiple < 1){
                transf.multiple = 1
            }

            if(transf.multiple == 1){
                container.style.transform = `matrix(${transf.multiple}, 0, 0, ${transf.multiple}, ${0}, ${0})`
            }else{
                container.style.transform = `matrix(${transf.multiple}, 0, 0, ${transf.multiple}, ${transf.transX}, ${transf.transY})`
                moveX = 625
                moveY = -7
                let multiple = transf.multiple
                if (innerWidth * multiple > outerWidth || innerHeight * multiple > outerHeight) {
                    console.log("1")

                    if (innerWidth * multiple > outerWidth && innerWidth * multiple > outerHeight) {
                        transX = Math.min(Math.max(moveX, outerWidth - innerWidth * (multiple + 1) / 2 - innerLeft), -innerLeft + innerWidth * (multiple - 1) / 2)
                        transY = Math.min(Math.max(moveY, outerHeight - innerHeight * (multiple + 1) / 2 - innerTop), -innerTop + innerHeight * (multiple - 1) / 2)
                    } else if (innerWidth * multiple > outerWidth && !(innerWidth * multiple > outerHeight)) {
                        console.log("3")
                        transX = Math.min(Math.max(moveX, outerWidth - innerWidth * (multiple + 1) / 2 - innerLeft), -innerLeft + innerWidth * (multiple - 1) / 2)
                        transY = Math.max(Math.min(moveY, outerHeight - innerHeight * (multiple + 1) / 2 - innerTop), -innerTop + innerHeight * (multiple - 1) / 2)
                    } else if (!(innerWidth * multiple > outerWidth) && innerWidth * multiple > outerHeight) {
                        console.log("4")
                        transX = Math.max(Math.min(moveX, outerWidth - innerWidth * (multiple + 1) / 2 - innerLeft), -innerLeft + innerWidth * (multiple - 1) / 2)
                        transY = Math.min(Math.max(moveY, outerHeight - innerHeight * (multiple + 1) / 2 - innerTop), -innerTop + innerHeight * (multiple - 1) / 2)
                    }
                }
                container.style.transform = `matrix(${multiple}, 0, 0, ${multiple}, ${transX}, ${transY})`
            }
        }



        var getcss = function(o,key)
        {
            return o.currentStyle? o.currentStyle[key] : document.defaultview.getComputedStyle(o,false)[key];
        }

        const getTransform = DOM => {
            let arr = getComputedStyle(DOM).transform.split(',')
            return {
                transX: isNaN(+arr[arr.length - 2]) ? 0 : +arr[arr.length - 2], // 获取translateX
                transY: isNaN(+arr[arr.length - 1].split(')')[0]) ? 0 : +arr[arr.length - 1].split(')')[0], // 获取translateX
                multiple: +arr[3] // 获取图片缩放比例
            }
        }

        function startDrag(e) {
            e.preventDefault();
            var container = document.querySelector('.inner_container');
            let transf = getTransform(container)
            offsetX = e.clientX - transf.transX // 图片初始位置
            offsetY = e.clientY - transf.transY // 图片初始位置
            document.onmousemove = drag;
        }

        function drag(e) {

            var container = document.querySelector('.inner_container');
            let { clientWidth: innerWidth, clientHeight: innerHeight, offsetLeft: innerLeft, offsetTop: innerTop } = document.querySelector('.inner_container')
            let { clientWidth: outerWidth, clientHeight: outerHeight } = document.querySelector('.map_photo') 
            let multiple = getTransform(container).multiple
            moveX = e.clientX - offsetX
            moveY = e.clientY - offsetY
            

            let transX = 0
            let transY = 0
            if (innerWidth * multiple > outerWidth || innerHeight * multiple > outerHeight) {
                if (innerWidth * multiple > outerWidth && innerWidth * multiple > outerHeight) {
                    transX = Math.min(Math.max(moveX, outerWidth - innerWidth * (multiple + 1) / 2 - innerLeft), -innerLeft + innerWidth * (multiple - 1) / 2)
                    transY = Math.min(Math.max(moveY, outerHeight - innerHeight * (multiple + 1) / 2 - innerTop), -innerTop + innerHeight * (multiple - 1) / 2)
                } else if (innerWidth * multiple > outerWidth && !(innerWidth * multiple > outerHeight)) {
                    transX = Math.min(Math.max(moveX, outerWidth - innerWidth * (multiple + 1) / 2 - innerLeft), -innerLeft + innerWidth * (multiple - 1) / 2)
                    transY = Math.max(Math.min(moveY, outerHeight - innerHeight * (multiple + 1) / 2 - innerTop), -innerTop + innerHeight * (multiple - 1) / 2)
                } else if (!(innerWidth * multiple > outerWidth) && innerWidth * multiple > outerHeight) {
                    transX = Math.max(Math.min(moveX, outerWidth - innerWidth * (multiple + 1) / 2 - innerLeft), -innerLeft + innerWidth * (multiple - 1) / 2)
                    transY = Math.min(Math.max(moveY, outerHeight - innerHeight * (multiple + 1) / 2 - innerTop), -innerTop + innerHeight * (multiple - 1) / 2)
                }
            }else{
                transX = Math.max(Math.min(moveX, outerWidth - innerWidth * (multiple + 1) / 2 - innerLeft), -innerLeft + innerWidth * (multiple - 1) / 2)
                transY = Math.max(Math.min(moveY, outerHeight - innerHeight * (multiple + 1) / 2 - innerTop), -innerTop + innerHeight * (multiple - 1) / 2)
            }
            container.style.transform = `matrix(${multiple}, 0, 0, ${multiple}, ${transX}, ${transY})`

        }

        function stopDrag() {
            document.onmousemove = null;
        }

        function mouseLeave() {
            stopDrag()
        }


</script>

</html>